# ТЗ: Страница заключения УЗК в `ut-test-reports`

Прочитай файл: `@.claude/basicDocumentationForTheApp/УЗК-бланк-заключения.pdf`.  
Это **бланк заключения по УЗК**.

Сделай в компоненте **`ut-test-reports`** страницу с **реактивной формой**, которая **максимально визуально похожа** на этот бланк (рамки, таблицы, подписи, расположение блоков).  
Ориентируйся на структуру и поля бланка **«Заключение № … от … по результатам контроля … (РУЗК)»** и блоки ниже.

---

## 1) Технологии и требования

1. Angular **standalone** компонент/страница внутри `ut-test-reports`.
2. Форма **Reactive Forms** (`FormGroup`, `FormArray`, валидаторы, по возможности typed forms).
3. UI-компоненты **PrimeNG**:
    - `p-datepicker` — для дат
    - `p-inputText` — для текста
    - `p-inputNumber` — для чисел
    - `p-table` — для таблицы **«РЕЗУЛЬТАТЫ КОНТРОЛЯ»** + редактируемые ячейки
4. **TailwindCSS** для раскладки (`grid`/`flex`), аккуратные рамки как в бланке.
5. Всё, что в PDF выделено **жёлтым** — сделать **инпутами** или **DatePicker**.
6. Кнопки:
    - после таблицы: **«Добавить строку дефекта»**, **«Удалить строку»**
    - в самом конце: **«Распечатать заключение»** (пока заглушка), **«Сохранить в Базе данных»** (пока `console.log(form.value)`)

---

## 2) Структура страницы (как в PDF)

Сверху **2 блока в одну строку** (на широком экране), на узком — **друг под другом**.

### Левый верхний блок (Лаборатория / средства контроля)

Поля (все editable):

- **Наименование лаборатории НК** (`inputText`)
- **Свидетельство об аттестации №** (`inputText`)
- **Нормативный документ** (`inputText`)  
  По умолчанию: `СТО Газпром 15-1.3-004-2023; СТО Газпром 15-2.3–005–2023`
- **Номер ОТК НК** (`inputText`)
- **Средства контроля** — три `inputText` с `placeholder`:
    1. дефектоскоп (тип/марка, заводской/серийный номер)
    2. типы/номер преобразователей/акустических блоков
    3. номер НО (калибровочного блока), форма/размер искусственного отражателя
- **Заключение по ВИК №** (`inputText`) и **дата** (`DatePicker`)

### Правый верхний блок (Объект / трасса / организации)

Поля:

- **Наименование объекта** (`inputText`)
- **Уровень качества** взять QualityLevel 'A' или 'B' или 'C' из компонента weld-params-widget.ts, но можно поменять на 'A' или 'B' или 'C'
- **Объём контроля, %** (`inputNumber`)
- **Название трассы** (`inputText`)
- **Участок трубопровода, километраж** (`inputText`)
- **Организация подрядчика** (`inputText`)
- **Организация заказчика** (`inputText`)
- **Шифр бригады или клеймо сварщика** (`inputText`)

---

## 3) Заголовок «ЗАКЛЮЧЕНИЕ № … от …» (по центру)

Сделай:

- `ЗАКЛЮЧЕНИЕ №` + поле **`conclusionNumber`** (`inputText`)
- `от` + **дата** (`DatePicker`)  
  (можно 1 поле даты, без отдельного “_//20”, но визуально похоже)

---

## 4) Таблица «РЕЗУЛЬТАТЫ КОНТРОЛЯ» (`p-table`)

Сделай `FormArray` строк дефектов. Колонки 1-в-1 по смыслу как в бланке:

1. **Номер сварного соединения по журналу сварки** (`inputText`)
2. **Диаметр и толщина стенки трубы, мм**
    - два поля: `diameter` и `thickness` (`p-inputNumber`)
3. **Номер дефекта** (`p-inputNumber`)
4. **Эквивалентная площадь дефекта Sдеф, мм²** (`p-inputNumber`)
5. **Поправки чувствительности, дБ** (`p-inputNumber`)
6. **Протяженность L, мм** (`p-inputNumber`)
7. **Высота дефекта h, мм** (`p-inputNumber`)
8. **Глубина залегания дефекта Y, мм** (`p-inputNumber`)
9. **Суммарная протяженность дефекта (ΣД), мм** (`p-inputNumber`)
10. **Координаты выявленных дефектов по периметру шва, мм** (`p-inputNumber`)
11. **Заключение (годен/ремонт/вырезать)** — `dropdown`
12. **Примечания** (`inputText` или `textarea`)

### Поведение

- Кнопка под таблицей **«Добавить строку»** добавляет пустую строку в `FormArray`.
- Рядом кнопка **«Удалить строку»** удаляет последнюю строку

---

## 5) Итоговое заключение о качестве (под таблицей)

Сделай строку:

- `Заключение о качестве сварного соединения № …`  
  Номер **подставь** из таблицы **«РЕЗУЛЬТАТЫ КОНТРОЛЯ»** (поле: *«Номер сварного соединения по журналу сварки»*).
- выбор итогового статуса (**годен/ремонт/вырезать**) — `dropdown` / `selectButton`

---

## 6) Подписи (низ формы)

Сделай 2 строки как в бланке:

1. **Контроль провел**
    - ФИО (`inputText`)
    - Уровень квалификации, удостоверение № (`inputText`)
    - Подпись (просто заглушка)
    - Дата (`DatePicker`)
2. **Заключение выдал** — те же поля

---

## 7) Валидация и UX

- Обязательные поля:
    - номер заключения
    - дата заключения (по умолчанию — **сегодняшняя**)
    - наименование объекта
    - уровень качества
    - минимум **1 строка** в таблице дефектов
- Добавь простую подсветку ошибок и сообщение под полем (Angular validators).
- Кнопка **«Сохранить»**: пока просто лог + возможность показать **JSON preview** под формой (для отладки).

---

## 8) Результат

Разметку сделай **максимально похожей** на PDF-бланк:

1) верхние 2 таблицы-блоки
2) заголовок по центру
3) большая таблица результатов
4) подписи
5) внизу кнопки **«Распечатать заключение»** и **«Сохранить в Базе данных»**
