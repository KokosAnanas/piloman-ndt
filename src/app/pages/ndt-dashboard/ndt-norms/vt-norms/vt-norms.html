<p-card

  class="shadow-sm w-full h-full"
  >
  <div class="flex items-baseline justify-between mb-3">
    <div class="text-xl text-slate-800 pr-4">
      Нормы оценки качества сварных соединений трубопроводов при проведении ВИК&nbsp;(АВИК)
    </div>

    <div class="flex items-center gap-3">
      <!-- Текущая толщина S -->
      <div class="text-sm text-slate-500 whitespace-nowrap">
        <span class="font-medium">S</span>
        =
        @if (formattedThicknessS(); as s) {
          {{ s }}&nbsp;мм
        } @else {
          <span class="italic text-slate-400">не задана</span>
        }
      </div>

      <!-- Кнопка закрытия -->
      <p-button
        icon="pi pi-times"
        [text]="true"
        [rounded]="true"
        severity="secondary"
        (onClick)="close.emit()"
        ariaLabel="Закрыть"
        class="flex-shrink-0"
      ></p-button>
    </div>
  </div>

  <div class="overflow-x-auto">
    <p-table
      [value]="rows"
      showGridlines
      class="w-full text-sm "
      [tableStyle]="{ 'min-width': '40rem' }"
      >
      <ng-template pTemplate="header">
        <tr class="bg-slate-50">
          <th class="px-3 py-2 font-semibold align-top">
              <div class="text-center">
                  Наименование дефектов
              </div>
          </th>
          <th class="px-1 py-2 font-semibold align-top w-1">
              <div class="text-center whitespace-nowrap">
                  Условное<br />
                  обозначение
              </div>
          </th>
          <th class="px-3 py-2 font-semibold align-top min-w-48">
              <div class="text-center">
                  Допустимые размеры дефектов<br />сварных соединений
              </div>
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
          <tr class="odd:bg-white even:bg-slate-50/40">
              <td class="px-3 py-3 align-top text-slate-800">
                  {{ row.defectName }}
              </td>
              <td class="px-1 py-3 align-top text-slate-700 font-semibold w-1">
                  <div class="text-center whitespace-nowrap">
                      {{ row.symbol }}
                  </div>
              </td>
              <td class="px-3 py-3 align-top text-slate-800">
                  @switch (row.dynamicKind) {
                      @case (DynamicKind.Fc) {
                          <div class="text-center"
                               [innerHTML]="fcDescriptionText()">
                          </div>
                      }
                      @case (DynamicKind.Fd) {
                          <div class="text-center"
                               [innerHTML]="fdDescriptionText()">
                          </div>
                      }
                      @default {
                          <div class="text-center">
                              {{ row.description }}
                          </div>
                      }
                  }
              </td>
          </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Примечания из документа, кратко -->
  <div class="mt-3 text-sm text-slate-500 space-y-1">
    <p>
      При смещении кромок более 2,0 мм любые подрезы и прочие дефекты
      на участке максимального смещения не допускаются.
    </p>
    <p>
      Подрезы с глубиной до ~0,05·S, но не более 0,2 мм, как правило,
      не квалифицируются как нормируемые дефекты и могут не отражаться
      в заключении.
    </p>
  </div>
</p-card>
